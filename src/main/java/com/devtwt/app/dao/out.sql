-- MySQL Script generated by MySQL Workbench
-- Tue Mar 31 07:36:52 2015
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema MOIKII
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema MOIKII
-- -----------------------------------------------------
CREATE SCHEMA `MOIKII` DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ;
USE `MOIKII` ;

-- -----------------------------------------------------
-- Table `MOIKII`.``
-- -----------------------------------------------------
DROP TABLE `` ;

CREATE TABLE `` (
)
;


-- -----------------------------------------------------
-- Table `MOIKII`.`DEV_CATEGORY`
-- -----------------------------------------------------
DROP TABLE `DEV_CATEGORY` ;

CREATE TABLE `DEV_CATEGORY` (
  `COMMUNITY_ID` VARCHAR(45) NOT NULL,
  `DEV_CATEGORY` VARCHAR(45) NULL,
  `PHASE` VARCHAR(45) NULL,
  `CREATE_ID` VARCHAR(45) NULL,
  `CREATE_DATE` VARCHAR(45) NULL,
  `UPDATE_ID` VARCHAR(45) NULL,
  `UPDATE_DATE` VARCHAR(45) NULL,
  PRIMARY KEY (`COMMUNITY_ID`))
;


-- -----------------------------------------------------
-- Table `MOIKII`.`COMMUNITY`
-- -----------------------------------------------------
DROP TABLE `COMMUNITY` ;

CREATE TABLE `COMMUNITY` (
  `COMMUNITY_ID` VARCHAR(45) NOT NULL,
  `COMMUNITY_NAME` VARCHAR(45) NULL,
  `DEV_CATEGORY_COMMUNITY_ID` VARCHAR(45) NOT NULL,
  `MEMBER_ID` VARCHAR(45) NULL,
  `CREATE_ID` VARCHAR(45) NULL,
  `CREATE_DATE` VARCHAR(45) NULL,
  `UPDATE_ID` VARCHAR(45) NULL,
  `UPDATE_DATE` VARCHAR(45) NULL,
  PRIMARY KEY (`COMMUNITY_ID`),
  INDEX `fk_COMMUNITY_DEV_CATEGORY1_idx` (`DEV_CATEGORY_COMMUNITY_ID` ASC),
  CONSTRAINT `fk_COMMUNITY_DEV_CATEGORY1`
    FOREIGN KEY (`DEV_CATEGORY_COMMUNITY_ID`)
    REFERENCES `MOIKII`.`DEV_CATEGORY` (`COMMUNITY_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
;


-- -----------------------------------------------------
-- Table `MOIKII`.`STREAM`
-- -----------------------------------------------------
DROP TABLE `STREAM` ;

CREATE TABLE `STREAM` (
  `STEREAM_NUM` VARCHAR(45) NOT NULL,
  `COMMUNITY_COMMUNITY_ID` VARCHAR(45) NOT NULL,
  `MOMO_NUM` VARCHAR(45) NULL,
  `CREATE_ID` VARCHAR(45) NULL,
  `CREATE_DATE` VARCHAR(45) NULL,
  `UPDATE_ID` VARCHAR(45) NULL,
  `UPDATE_DATE` VARCHAR(45) NULL,
  PRIMARY KEY (`STEREAM_NUM`),
  INDEX `fk_STREAM_COMMUNITY1_idx` (`COMMUNITY_COMMUNITY_ID` ASC),
  CONSTRAINT `fk_STREAM_COMMUNITY1`
    FOREIGN KEY (`COMMUNITY_COMMUNITY_ID`)
    REFERENCES `MOIKII`.`COMMUNITY` (`COMMUNITY_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
;


-- -----------------------------------------------------
-- Table `MOIKII`.`ROLE_MASTER`
-- -----------------------------------------------------
DROP TABLE `ROLE_MASTER` ;

CREATE TABLE `ROLE_MASTER` (
  `ROLE_ID` VARCHAR(45) NOT NULL COMMENT '2種（admin・pampee）',
  `ROLE_NAME` VARCHAR(45) NULL,
  PRIMARY KEY (`ROLE_ID`))
;


-- -----------------------------------------------------
-- Table `MOIKII`.`USER_MASTER`
-- -----------------------------------------------------
DROP TABLE `USER_MASTER` ;

CREATE TABLE `USER_MASTER` (
  `MEMBER_ID` VARCHAR(45) NOT NULL,
  `MEMBER_NAME` VARCHAR(45) NULL,
  `PASSWORD` VARCHAR(45) NULL DEFAULT 'momo123',
  `ROLE_MASTER_ROLE_ID` VARCHAR(45) NOT NULL,
  `CREATE_ID` VARCHAR(45) NULL,
  `CREATE_DATE` VARCHAR(45) NULL,
  `UPDATE_ID` VARCHAR(45) NULL,
  `UPDATE_DATE` VARCHAR(45) NULL,
  `DELETE_FLAG` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`MEMBER_ID`),
  INDEX `fk_USER_MASTER_ROLE_MASTER1_idx` (`ROLE_MASTER_ROLE_ID` ASC),
  CONSTRAINT `fk_USER_MASTER_ROLE_MASTER1`
    FOREIGN KEY (`ROLE_MASTER_ROLE_ID`)
    REFERENCES `MOIKII`.`ROLE_MASTER` (`ROLE_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
;


-- -----------------------------------------------------
-- Table `MOIKII`.`MOMO`
-- -----------------------------------------------------
DROP TABLE `MOMO` ;

CREATE TABLE `MOMO` (
  `MOMO_NUM` VARCHAR(45) NOT NULL,
  `STREAM_STEREAM_NUM` VARCHAR(45) NOT NULL,
  `PHASE` VARCHAR(45) NULL,
  `MOMO_CONTENTS` VARCHAR(45) NULL,
  `CREATE_ID` VARCHAR(45) NULL,
  `CREATE_DATE` VARCHAR(45) NULL,
  `UPDATE_ID` VARCHAR(45) NOT NULL,
  `UPDATE_DATE` VARCHAR(45) NULL,
  `USER_MASTER_MEMBER_ID` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`MOMO_NUM`, `STREAM_STEREAM_NUM`),
  INDEX `fk_MOMO_STREAM1_idx` (`STREAM_STEREAM_NUM` ASC),
  INDEX `fk_MOMO_USER_MASTER1_idx` (`USER_MASTER_MEMBER_ID` ASC),
  CONSTRAINT `fk_MOMO_STREAM1`
    FOREIGN KEY (`STREAM_STEREAM_NUM`)
    REFERENCES `MOIKII`.`STREAM` (`STEREAM_NUM`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_MOMO_USER_MASTER1`
    FOREIGN KEY (`USER_MASTER_MEMBER_ID`)
    REFERENCES `MOIKII`.`USER_MASTER` (`MEMBER_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)

COMMENT = 'ストリームに流れるmomoが格納される。';


-- -----------------------------------------------------
-- Table `MOIKII`.`LEADER_VIEW`
-- -----------------------------------------------------
DROP TABLE `LEADER_VIEW` ;

CREATE TABLE `LEADER_VIEW` (
  `MEMBER_ID` VARCHAR(45) NULL,
  `COMMUNITY_ID` VARCHAR(45) NOT NULL,
  `CREATE_ID` VARCHAR(45) NULL,
  `CREATE_DATE` VARCHAR(45) NULL,
  `UPDATE_ID` VARCHAR(45) NULL,
  `UPDATE_DATE` VARCHAR(45) NULL,
  `USER_MASTER_MEMBER_ID` INT NOT NULL,
  INDEX `fk_LEADER_USER_MASTER1_idx` (`USER_MASTER_MEMBER_ID` ASC),
  CONSTRAINT `fk_LEADER_USER_MASTER1`
    FOREIGN KEY (`USER_MASTER_MEMBER_ID`)
    REFERENCES `MOIKII`.`USER_MASTER` (`MEMBER_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
